<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Docs PWA Style Tab Bar with Close Button</title>
  <style>
    body { background: #181818; color: #fff; margin: 0; font-family: sans-serif; }
    .tab-bar {
      display: flex;
      align-items: center;
      background: #232323;
      height: 48px;
      padding: 0 8px;
      gap: 4px;
    }
    .tab {
      display: flex;
      align-items: center;
      background: #24262a;
      border-radius: 12px 12px 0 0;
      padding: 0 14px 0 8px;
      margin-right: 4px;
      height: 38px;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
    }
    .tab.active { background: #202124; }
    .tab .icon {
      width: 24px;
      height: 24px;
      margin-right: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .tab .title {
      font-size: 15px;
      font-weight: 500;
      margin-right: 8px;
    }
    .close-btn {
      background: none;
      border: none;
      color: #bbb;
      font-size: 18px;
      cursor: pointer;
      margin-left: 2px;
      margin-right: -2px;
      padding: 0 4px;
      border-radius: 50%;
      transition: background 0.2s, color 0.2s;
    }
    .close-btn:hover {
      background: #484848;
      color: #fff;
    }
    .add-tab {
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      transition: background 0.2s;
    }
    .add-tab:hover { background: #202124; }
    .tab-content {
      background: #232323;
      padding: 2em;
      min-height: 120px;
    }
  </style>
</head>
<body>
  <div class="tab-bar" id="tab-bar"></div>
  <div id="tab-content" class="tab-content"></div>
  <script>
    // Simple doc icon SVG
    const docIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <rect x="3" y="3" width="18" height="18" rx="3" fill="#4285F4"/>
      <rect x="7" y="8" width="10" height="2" rx="1" fill="white"/>
      <rect x="7" y="12" width="6" height="2" rx="1" fill="white"/>
    </svg>`;

    // Initial tabs data
    let tabs = [
      { id: 1, title: "Untitled Document", content: "This is your document." }
    ];
    let activeTabId = 1;
    let nextTabId = 2;

    function renderTabs() {
      const tabBar = document.getElementById('tab-bar');
      tabBar.innerHTML = '';
      tabs.forEach((tab, i) => {
        const tabEl = document.createElement('div');
        tabEl.className = 'tab' + (tab.id === activeTabId ? ' active' : '');
        tabEl.innerHTML = `
          <span class="icon">${docIcon}</span>
          <span class="title">${tab.title}</span>
          <button class="close-btn" title="Close Tab">&times;</button>
        `;
        // Tab click (don't close if clicking close button)
        tabEl.addEventListener('click', (e) => {
          if (!e.target.classList.contains('close-btn')) {
            activeTabId = tab.id;
            renderTabs();
            renderContent();
          }
        });
        // Close button click
        tabEl.querySelector('.close-btn').addEventListener('click', (e) => {
          e.stopPropagation();
          closeTab(tab.id);
        });
        tabBar.appendChild(tabEl);
      });
      // Add "+" button
      const addBtn = document.createElement('button');
      addBtn.className = 'add-tab';
      addBtn.innerHTML = '+';
      addBtn.onclick = () => {
        const newTab = { id: nextTabId++, title: "New Document", content: "Start writing..." };
        tabs.push(newTab);
        activeTabId = newTab.id;
        renderTabs();
        renderContent();
      };
      tabBar.appendChild(addBtn);
    }

    function closeTab(tabId) {
      const idx = tabs.findIndex(t => t.id === tabId);
      if (idx === -1) return;
      tabs.splice(idx, 1);
      // If no tabs left, add a new one
      if (tabs.length === 0) {
        const newTab = { id: nextTabId++, title: "Untitled Document", content: "This is your document." };
        tabs.push(newTab);
        activeTabId = newTab.id;
      } else if (activeTabId === tabId) {
        // Activate the next tab, or previous if closing the last
        const newIdx = idx < tabs.length ? idx : tabs.length - 1;
        activeTabId = tabs[newIdx].id;
      }
      renderTabs();
      renderContent();
    }

    function renderContent() {
      const tab = tabs.find(t => t.id === activeTabId);
      document.getElementById('tab-content').textContent = tab ? tab.content : '';
    }

    renderTabs();
    renderContent();
  </script>
</body>
</html>
